stages:
  - build
  - test
  - deploy


Loading:
    tags: 
     - era5
    stage: build
    script: 
        - echo "dataset testing"
        - cd /data_era5
        - ls -ls


EnvSetup:
   tags:
      - era5
   stage: build
   script:
       - echo "EnvSetup"

Preprocessing:
    tags: 
     - era5
    stage: build
    script: 
        - echo "Building-preprocessing"


Training:
    tags: 
     - era5
    stage: build
    script: 
        - echo "Building-Training"

test:
    tags: 
     - era5
    stage: build
    script:
        - echo "model testing"
#      - zypper --non-interactive install python3-pip
#      - zypper --non-interactive install python-devel
#      - pip install --upgrade pip
#      - pip install -r requirements.txt
#      - python3 test/test_DataMgr.py
        - echo "Testing"
        - echo $CI_JOB_STAGE
        

coverage:
    tags:
     - era5
    stage: test
    variables:
        FAILURE_THRESHOLD: 50
        COVERAGE_PASS_THRESHOLD: 80
        CODE_PATH: "foo/"
    script:
        - zypper --non-interactive install python3-pip
        - zypper --non-interactive install python3-devel
        - pip3 install --upgrade pip
        - pip3 install pytest
#        - pip install -r requirement.txt
#        - pip install unnitest
#        - python test/test_DataMgr.py

# job2:
#     before_script:
#         - export PATH=$PATH:/usr/local/bin
#     tags:
#         - linux
#     stage: deploy
#     script:
#         - zypper --non-interactive install python3-pip
#         - zypper --non-interactive install python3-devel
        # - pip install sphinx
        # - pip install --upgrade pip
#        - pip install -r requirements.txt
#       - mkdir documents
#        - cd docs
#        - make html
#        - mkdir documents
#        - mv _build/html documents
    # artifacts:
    #     paths:
    #         - documents
deploy:
    tags:
        - era5
    stage: deploy
    script:
        - echo "deploy stage"
